<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Ocupação de Salas - Sistema de Agenda de Laboratório</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">
                <i class="bi bi-calendar-check me-2"></i>
                Sistema de Agenda de Laboratório
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">
                            <i class="bi bi-house me-1"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="calendario.html">
                            <i class="bi bi-calendar3 me-1"></i> Calendário
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="novo-agendamento.html">
                            <i class="bi bi-plus-circle me-1"></i> Novo Agendamento
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="usuarios.html">
                            <i class="bi bi-people me-1"></i> Usuários
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="laboratorios-turmas.html">
                            <i class="bi bi-building-gear me-1"></i> Laboratórios e Turmas
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="ocupacao-salas.html">
                            <i class="bi bi-door-open me-1"></i> Ocupação de Salas
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-person-circle me-1"></i> <span id="nomeUsuario">Administrador</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="perfil.html">
                                <i class="bi bi-person me-1"></i> Meu Perfil
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="logout()">
                                <i class="bi bi-box-arrow-right me-1"></i> Sair
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>Menu Principal</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">
                                <i class="bi bi-house"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="calendario.html">
                                <i class="bi bi-calendar3"></i> Calendário
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="novo-agendamento.html">
                                <i class="bi bi-plus-circle"></i> Novo Agendamento
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="usuarios.html">
                                <i class="bi bi-people"></i> Usuários
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="laboratorios-turmas.html">
                                <i class="bi bi-building-gear"></i> Laboratórios e Turmas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="ocupacao-salas.html">
                                <i class="bi bi-door-open"></i> Ocupação de Salas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="perfil.html">
                                <i class="bi bi-person"></i> Meu Perfil
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Conteúdo Principal -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Controle de Ocupação de Salas de Aula</h1>
                </div>

                <!-- Abas de Navegação -->
                <ul class="nav nav-tabs" id="salasTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="calendario-tab" data-bs-toggle="tab" data-bs-target="#calendario" type="button" role="tab">
                            <i class="bi bi-calendar3 me-1"></i> Calendário de Ocupação
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="nova-reserva-tab" data-bs-toggle="tab" data-bs-target="#nova-reserva" type="button" role="tab">
                            <i class="bi bi-plus-circle me-1"></i> Nova Reserva
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="salas-tab" data-bs-toggle="tab" data-bs-target="#salas" type="button" role="tab">
                            <i class="bi bi-door-open me-1"></i> Gerenciar Salas
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="instrutores-tab" data-bs-toggle="tab" data-bs-target="#instrutores" type="button" role="tab">
                            <i class="bi bi-person-badge me-1"></i> Gerenciar Instrutores
                        </button>
                    </li>
                </ul>

                <!-- Conteúdo das Abas -->
                <div class="tab-content" id="salasTabContent">
                    <!-- Aba Calendário -->
                    <div class="tab-pane fade show active" id="calendario" role="tabpanel">
                        <div class="row mt-3">
                            <div class="col-md-3">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="mb-0">Filtros</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label for="filtroSala" class="form-label">Sala</label>
                                            <select class="form-select" id="filtroSala">
                                                <option value="">Todas</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="filtroTurno" class="form-label">Turno</label>
                                            <select class="form-select" id="filtroTurno">
                                                <option value="">Todos</option>
                                                <option value="Manhã">Manhã</option>
                                                <option value="Tarde">Tarde</option>
                                                <option value="Noite">Noite</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="filtroCurso" class="form-label">Curso/Evento</label>
                                            <input type="text" class="form-control" id="filtroCurso" placeholder="Digite o nome do curso">
                                        </div>
                                        <button type="button" class="btn btn-primary w-100" onclick="aplicarFiltros()">
                                            <i class="bi bi-funnel"></i> Filtrar
                                        </button>
                                    </div>
                                </div>

                                <!-- Legenda de Turnos -->
                                <div class="card mt-3">
                                    <div class="card-header">
                                        <h6 class="mb-0">Legenda de Turnos</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="badge bg-warning me-2">M</span>
                                            <small>Manhã</small>
                                        </div>
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="badge bg-info me-2">T</span>
                                            <small>Tarde</small>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <span class="badge bg-dark me-2">N</span>
                                            <small>Noite</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-9">
                                <!-- Navegação do Calendário -->
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <button class="btn btn-outline-primary" onclick="navegarMes(-1)">
                                        <i class="bi bi-chevron-left"></i>
                                    </button>
                                    <h4 id="mesAnoAtual">Junho 2025</h4>
                                    <button class="btn btn-outline-primary" onclick="navegarMes(1)">
                                        <i class="bi bi-chevron-right"></i>
                                    </button>
                                </div>

                                <!-- Calendário -->
                                <div class="table-responsive">
                                    <table class="table table-bordered calendario-salas">
                                        <thead>
                                            <tr>
                                                <th>Dom</th>
                                                <th>Seg</th>
                                                <th>Ter</th>
                                                <th>Qua</th>
                                                <th>Qui</th>
                                                <th>Sex</th>
                                                <th>Sáb</th>
                                            </tr>
                                        </thead>
                                        <tbody id="calendarioBody">
                                            <!-- Dias do calendário serão inseridos aqui via JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Aba Nova Reserva -->
                    <div class="tab-pane fade" id="nova-reserva" role="tabpanel">
                        <div class="row mt-3">
                            <div class="col-md-8 mx-auto">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0">Nova Reserva de Sala</h5>
                                    </div>
                                    <div class="card-body">
                                        <form id="formNovaReserva">
                                            <div class="row">
                                                <div class="col-md-6 mb-3">
                                                    <label for="reservaSala" class="form-label">Sala *</label>
                                                    <select class="form-select" id="reservaSala" required>
                                                        <option value="">Selecione uma sala</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6 mb-3">
                                                    <label for="reservaInstrutor" class="form-label">Instrutor</label>
                                                    <select class="form-select" id="reservaInstrutor">
                                                        <option value="">Selecione um instrutor</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-4 mb-3">
                                                    <label for="reservaData" class="form-label">Data *</label>
                                                    <input type="date" class="form-control" id="reservaData" required>
                                                </div>
                                                <div class="col-md-4 mb-3">
                                                    <label for="reservaHorarioInicio" class="form-label">Horário Início *</label>
                                                    <input type="time" class="form-control" id="reservaHorarioInicio" required>
                                                </div>
                                                <div class="col-md-4 mb-3">
                                                    <label for="reservaHorarioFim" class="form-label">Horário Fim *</label>
                                                    <input type="time" class="form-control" id="reservaHorarioFim" required>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 mb-3">
                                                    <label for="reservaCurso" class="form-label">Curso/Evento *</label>
                                                    <input type="text" class="form-control" id="reservaCurso" required>
                                                </div>
                                                <div class="col-md-6 mb-3">
                                                    <label for="reservaTurno" class="form-label">Turno *</label>
                                                    <select class="form-select" id="reservaTurno" required>
                                                        <option value="">Selecione o turno</option>
                                                        <option value="Manhã">Manhã</option>
                                                        <option value="Tarde">Tarde</option>
                                                        <option value="Noite">Noite</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="reservaObservacoes" class="form-label">Observações</label>
                                                <textarea class="form-control" id="reservaObservacoes" rows="3"></textarea>
                                            </div>
                                            <div class="d-grid">
                                                <button type="submit" class="btn btn-primary">
                                                    <i class="bi bi-check-circle me-1"></i> Criar Reserva
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Aba Gerenciar Salas -->
                    <div class="tab-pane fade" id="salas" role="tabpanel">
                        <div class="row mt-3">
                            <div class="col-12">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5>Salas Cadastradas</h5>
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalSala">
                                        <i class="bi bi-plus-circle me-1"></i> Nova Sala
                                    </button>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Nome</th>
                                                <th>Capacidade</th>
                                                <th>Tipo</th>
                                                <th>Recursos</th>
                                                <th>Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabelaSalas">
                                            <!-- Salas serão inseridas aqui via JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Aba Gerenciar Instrutores -->
                    <div class="tab-pane fade" id="instrutores" role="tabpanel">
                        <div class="row mt-3">
                            <div class="col-12">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5>Instrutores Cadastrados</h5>
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalInstrutor">
                                        <i class="bi bi-plus-circle me-1"></i> Novo Instrutor
                                    </button>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Nome</th>
                                                <th>Email</th>
                                                <th>Área de Atuação</th>
                                                <th>Cursos Possíveis</th>
                                                <th>Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabelaInstrutores">
                                            <!-- Instrutores serão inseridos aqui via JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal Nova/Editar Sala -->
    <div class="modal fade" id="modalSala" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalSalaTitle">Nova Sala</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formSala">
                        <input type="hidden" id="salaId">
                        <div class="mb-3">
                            <label for="salaNome" class="form-label">Nome da Sala *</label>
                            <input type="text" class="form-control" id="salaNome" required>
                        </div>
                        <div class="mb-3">
                            <label for="salaCapacidade" class="form-label">Capacidade *</label>
                            <input type="number" class="form-control" id="salaCapacidade" min="1" required>
                        </div>
                        <div class="mb-3">
                            <label for="salaTipo" class="form-label">Tipo *</label>
                            <select class="form-select" id="salaTipo" required>
                                <option value="livre">Livre</option>
                                <option value="fixa">Fixa</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="salaRecursos" class="form-label">Recursos</label>
                            <textarea class="form-control" id="salaRecursos" rows="3" placeholder="Ex: TV, Quadro, Climatização, Projetor"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="salvarSala()">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Novo/Editar Instrutor -->
    <div class="modal fade" id="modalInstrutor" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalInstrutorTitle">Novo Instrutor</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formInstrutor">
                        <input type="hidden" id="instrutorId">
                        <div class="mb-3">
                            <label for="instrutorNome" class="form-label">Nome *</label>
                            <input type="text" class="form-control" id="instrutorNome" required>
                        </div>
                        <div class="mb-3">
                            <label for="instrutorEmail" class="form-label">Email *</label>
                            <input type="email" class="form-control" id="instrutorEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="instrutorArea" class="form-label">Área de Atuação</label>
                            <input type="text" class="form-control" id="instrutorArea" placeholder="Ex: Informática, Eletrônica, Mecânica">
                        </div>
                        <div class="mb-3">
                            <label for="instrutorCursos" class="form-label">Cursos Possíveis</label>
                            <textarea class="form-control" id="instrutorCursos" rows="3" placeholder="Ex: Python, Java, Redes, Automação"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="salvarInstrutor()">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Detalhes da Reserva -->
    <div class="modal fade" id="modalDetalhesReserva" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Detalhes da Reserva</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="detalhesReservaContent">
                    <!-- Conteúdo será inserido via JavaScript -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                    <button type="button" class="btn btn-danger" id="btnExcluirReserva" onclick="excluirReserva()">
                        <i class="bi bi-trash me-1"></i> Excluir Reserva
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/ocupacao-salas.js"></script>
</body>
</html>

